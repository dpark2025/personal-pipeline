# Benchmark Script Port Conflict and Startup Issues

## Title
Performance benchmark script fails to start due to port conflicts and server management

## Priority
High

## Severity
Medium

## Description
The performance benchmark script (`scripts/benchmark.js`) fails to start its own MCP server instance for testing. The script tries to start a server on the same port (3000) but encounters issues when a server is already running, and has problems starting servers even when the port is free.

## Steps to Reproduce
1. Run `npm run demo:setup:memory-only` (which starts server on port 3000)
2. During demo setup, benchmark tests are executed
3. Benchmark fails with "MCP server failed to start within 30 seconds"
4. OR: Stop existing server and run `npm run benchmark` directly
5. Similar startup timeout issues occur

## Expected Behavior
- Benchmark script should detect if server is already running and either:
  - Use the existing server instance
  - Start on a different port
  - Provide clear error message about port conflict
- Should have robust server startup detection with proper timeouts
- Should clean up server processes reliably

## Actual Behavior
- Benchmark fails with generic timeout message
- No clear indication of port conflicts
- Demo setup reports: "‚ùå Benchmark failed: MCP server failed to start within 30 seconds"
- No server process cleanup on failure

## Technical Details
- Default server port: 3000
- Benchmark script timeout: 30 seconds for server startup
- Demo setup includes benchmark execution as part of validation
- Error occurs in benchmark script's server startup phase

## Evidence from Demo Log
```
üîß Starting MCP server for benchmarking...
‚ùå Benchmark failed: MCP server failed to start within 30 seconds
```

## Files Affected
- `scripts/benchmark.js` (server startup and port management)
- `scripts/setup-demo.sh` (benchmark integration)
- Potentially other performance scripts

## Impact
- Demo environment setup partially fails
- Performance validation cannot be completed
- Milestone 1.3 performance targets cannot be properly validated
- User experience degraded for demo setup

## Suggested Solutions
1. **Port Detection**: Check if port 3000 is in use before starting benchmark server
2. **Alternative Ports**: Use port 3001, 3002, etc. for benchmark testing
3. **Server Reuse**: Option to use existing server instance for benchmarking
4. **Better Error Handling**: Clear error messages for port conflicts
5. **Process Management**: Improved server startup detection and cleanup
6. **Configuration**: Make benchmark port configurable

## Assign to
Performance Engineer (Chan) - Benchmark script expertise and performance testing knowledge needed

## Additional Context
This affects the overall milestone 1.3 validation since performance benchmarking is a key deliverable. The issue may be related to server startup detection logic or port management in the benchmark script.